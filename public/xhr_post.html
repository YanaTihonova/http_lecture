<!DOCTYPE html>
<html>
    <head>
        <title>HTTP GET</title>
    </head>
    <body>
        <h1>HTTP POST</h1>
        <h2>HTTP POST using xhr!</h2>
        <button id="post_user">CREATE NEW USER</button>
        
        <div id="resId"></div>

        <hr>
        <h2>Here is POST via form submission!</h2>
        <form action="/user" method="GET">
            <div>
                <label for="firstName">First Name:</label>
                <!-- NAME IS VERY IMPORTANT -->
                <input id="firstName" name="firstName" placeholder="First Name here..." />
            </div>
            <div>
                <label for="lastName">Last Name:</label>
                <!-- NAME IS VERY IMPORTANT -->
                <input id="lastName" name="lastName" placeholder="Last Name here..." />
            </div>
            <button type="submit">Submit</button>
        </form>

        <script type="text/javascript">
            
            // '/user' type request
            document.getElementById('post_user').addEventListener('click', function () {
                var oReq = new XMLHttpRequest();
                oReq.addEventListener('load', function () {
                    document.getElementById('resId').textContent = this.responseText.substr(0, 100);
                });
                oReq.open('POST', '/user');

                // very important!!! we should tell what kind of body we send
                oReq.setRequestHeader('content-type', 'application/json');

                // transform object to string
                const body = JSON.stringify({
                    firstName: 'somebody',
                    lastName: 'again'
                });

                // sent request body here as a string
                oReq.send(body);
            });

        </script>
    </body>
</html>
